!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2);e.highlight=n.highlight;var r=i(3),s=function(){function t(t){var e=this,i=t.attachShadow({mode:"closed"});this.term=document.createElement("div"),this.container=document.createElement("div"),this.main=document.createElement("div"),i.append(this.term),this.term.append(this.container),this.container.append(this.main),this.input=document.createElement("input"),this.main.append(this.input),this.panel=this.createPanel("<span>&nbsp;</span>"),this.cursor=this.panel.children[0],this.prefix="",this.p="",this.isRunning=!1,this.commandHandler=function(){e.end()},this.history={index:0,items:[{value:"",modification:""}]},this.tab=new r.default(this.container),this.initStyle(),this.addEventListeners(),this.input.focus(),this.flashCursor()}return t.prototype.end=function(){this.isRunning=!1,this.write(this.prefix)},t.prototype.setColor=function(t){var e=t.text,i=t.background;e&&(this.textColor=e,this.term.style.color=e,this.cursor.style.backgroundColor=e),i&&(this.backgroundColor=i,this.term.style.backgroundColor=i,this.cursor.style.color=i)},t.prototype.setCommandHandler=function(t){this.commandHandler=t},t.prototype.setFont=function(t){var e=t.family,i=t.size;e&&(this.term.style.fontFamily=e,this.input.style.fontFamily=e),i&&(this.term.style.fontSize=i,this.input.style.fontSize=i)},t.prototype.setPrefix=function(t){this.prefix=t},t.prototype.setTabHandler=function(t){this.tab.setHandler(t)},t.prototype.write=function(t){if(t){var e=!1;this.term.scrollHeight-this.term.scrollTop-this.term.clientHeight<=1&&(e=!0),t=n.highlight(this.input.value)+t,this.input.value="",this.history.items[this.history.index].modification="";var i=t.split("\n");this.panel.innerHTML=this.p+i[0];for(var r=1;r<i.length;r++)this.panel=this.createPanel(i[r]);this.p=this.panel.innerHTML,this.panel.innerHTML=this.p+"<span>&nbsp;</span>",this.updateCursor(0,0,e)}},t.prototype.addEventListeners=function(){var t=this;this.term.addEventListener("mouseup",(function(e){""===window.getSelection().toString()&&(t.input.disabled=!1,t.input.focus(),t.flashCursor())})),this.input.addEventListener("blur",(function(){t.input.disabled=!0,clearInterval(t.timer),t.hideCursor()})),this.input.addEventListener("input",(function(e){var i=t.input.value;t.history.items[t.history.index].modification=i,t.writeTemporarily(n.highlight(i)),t.tab.isRunning()&&(t.tab.init(),t.tab.showPrompts(t.input.value,t.input.selectionStart)&&t.scroll(t.term.scrollHeight))})),this.input.addEventListener("keydown",(function(e){var i,n;switch(e.keyCode){case 13:if(t.tab.isRunning()){t.insert(t.tab.getText()),t.tab.init();break}if(i=t.input.value,t.isRunning)i||t.write("<span>&nbsp;</span>\n");else{if(t.write("\n"),!i){n=t.history.items.length-1,t.history.index=n,t.history.items[n].modification="",t.end();break}t.isRunning=!0;var r=t.history.items.length;t.history.items[r-1].value=i.trim(),t.history.index=r,t.history.items.push({value:"",modification:""})}t.commandHandler(i);break;case 37:(n=t.input.selectionStart-1)>=0&&t.updateCursor(n,t.input.value.length);break;case 39:n=t.input.selectionStart+1;var s=t.input.value.length;n<=s&&t.updateCursor(n,s);break;case 38:if(t.isRunning)break;t.showHistory(t.history.index-1);break;case 40:if(t.isRunning)break;t.showHistory(t.history.index+1);break;case 9:if(t.isRunning)break;t.tab.isRunning()?t.tab.next():t.tab.showPrompts(t.input.value,t.input.selectionStart)&&t.scroll(t.term.scrollHeight),e.preventDefault();break;case 27:t.tab.init()}}))},t.prototype.createPanel=function(t){var e=document.createElement("div");return e.style.width="100%",t&&(e.innerHTML=t),this.main.append(e),e},t.prototype.flashCursor=function(){var t=this;clearInterval(this.timer),this.showCursor();var e=1;this.timer=setInterval((function(){e++%2?t.hideCursor():t.showCursor(),7===e&&clearInterval(t.timer)}),500)},t.prototype.hideCursor=function(){this.cursor.style.color="inherit",this.cursor.style.backgroundColor="transparent"},t.prototype.initStyle=function(){this.term.style.width="100%",this.term.style.height="100%",this.term.style.overflowX="hidden",this.term.style.overflowY="scroll",this.term.style.fontFamily="monospace",this.container.style.position="relative",this.container.style.width="calc(100% - "+n.getScrollWidth()+"px)",this.main.style.width="100%",this.main.style.lineBreak="anywhere",this.input.style.position="absolute",this.input.style.top="0",this.input.style.left="0",this.input.style.zIndex="-100",this.input.style.width="0",this.input.style.border="none",this.input.style.padding="0",this.setColor({text:"#eee",background:"#2e3436"}),this.setFont({family:"monospace",size:"1em"})},t.prototype.insert=function(t){var e=this.input.value,i=this.input.selectionStart,r=(t=e.substring(0,i)+t).length;t+=e.substring(i),this.input.value=t,this.input.setSelectionRange(r,r),this.history.items[this.history.index].modification=t,this.writeTemporarily(n.highlight(t))},t.prototype.scroll=function(t){this.term.scrollTop=t-this.term.clientHeight},t.prototype.showCursor=function(){this.cursor.style.color=this.backgroundColor,this.cursor.style.backgroundColor=this.textColor},t.prototype.showHistory=function(t){var e=this.history.items[t];if(e){this.history.index=t;var i=this.history.items[t].modification;i||(i=e.value),this.input.value=i,this.writeTemporarily(n.highlight(i))}},t.prototype.updateCursor=function(t,e,i){this.hideCursor();var n=this.panel.children;this.cursor=n[n.length+t-e-1];var r=this.cursor.offsetTop,s=this.cursor.offsetLeft;this.input.style.top=r+"px",this.input.style.left=s+"px",void 0!==i&&i&&this.scroll(r+this.cursor.offsetHeight),this.flashCursor()},t.prototype.writeTemporarily=function(t){this.panel.innerHTML=this.p+t+"<span>&nbsp;</span>",this.updateCursor(this.input.selectionStart,this.input.value.length)},t}();e.IOTerm=s},function(t,e,i){"use strict";i.r(e);var n=i(0);document.getElementById("seResizeBtn").addEventListener("click",t=>{var e=document.getElementById("term");e.style.width=e.offsetWidth+50+"px",e.style.height=e.offsetHeight+10+"px"});var r=new n.IOTerm(document.getElementById("term"));r.setPrefix(Object(n.highlight)("(base) ")+Object(n.highlight)("admin@Puter","color: #8ae234")+Object(n.highlight)(":")+Object(n.highlight)("~","color: #729fcf")+Object(n.highlight)("$ "));var s=!1;r.setCommandHandler(t=>{if(s)console.log(t);else{s=!0,t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n");var e=0,i=setInterval(()=>{r.write(Object(n.highlight)(e+++"Hello, "+t+"\n")),3===e&&(clearInterval(i),s=!1,r.end())},1e3)}}),r.setTabHandler((t,e)=>t?['<span style="color: #729fcf;">.</span>','<span style="color: #729fcf;">..</span>',t,e,"你好","Hello"]:[]);r.write(Object(n.highlight)("Welcome to IOTerm. IOTerm is a simple front-end terminal component but not as same as a terminal. It is just in charge of <b>Input</b> and <b>Output</b> but do not care about what is the input, what is the output and how the input will be precessed. To make full use of a web page, there are some differences between IOTerm and the terminal we use in a Linux distribution. ")+Object(n.highlight)('If a newline is wanted, please add a line feed "\\n" rather than "\\r\\n", "\\r" or HTML tag "<br>".\n',"color: red; font-weight: 600;")),r.end(),customElements.define("my-ioterm",class extends HTMLElement{constructor(){super(),new n.IOTerm(this)}})},function(t,e,i){"use strict";function n(t,e){return void 0===e?"<span>"+t+"</span>":'<span style="'+e+'">'+t+"</span>"}Object.defineProperty(e,"__esModule",{value:!0}),e.getScrollWidth=function(){var t=document.createElement("div");t.style.position="absolute",t.style.width="100px",t.style.overflow="scroll";var e=document.createElement("div");e.style.width="100%",document.body.append(t),t.append(e);var i=t.offsetWidth-e.offsetWidth;return e.remove(),t.remove(),i},e.highlight=function(t,e){for(var i,r="",s=0;s<t.length;)switch(i=t.charAt(s)){case" ":r+=n("&nbsp;",e),s++;break;case"<":r+=n("&lt;",e),s++;break;case">":r+=n("&gt;",e),s++;break;case"&":r+=n("&amp;",e),s++;break;case"\n":r+="\n",s++;break;default:r+=n(i,e),s++}return r}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.container=document.createElement("div"),this.scrollContainer=document.createElement("div"),this.panel=document.createElement("div"),this.count=0,this.handler=function(){return['<span style="color: #729fcf;">.</span>','<span style="color: #729fcf;">..</span>']},t.append(this.container),this.container.append(this.scrollContainer),this.scrollContainer.append(this.panel),this.initStyle()}return t.prototype.getText=function(){return this.panel.children[this.count-1].innerText},t.prototype.init=function(){this.scroll(0),this.container.style.display="none",this.container.style.top="0",this.count=0,this.panel.innerHTML=""},t.prototype.isRunning=function(){return 0!==this.count},t.prototype.next=function(){var t=this.count,e=this.panel.children;e[t-1].style.backgroundColor="transparent";var i=e[t],n=0;i?(this.count++,n=i.offsetLeft):(i=e[0],this.count=1),i.style.backgroundColor="rgba(255, 255, 255, 0.2)",this.scroll(n)},t.prototype.setHandler=function(t){this.handler=t},t.prototype.showPrompts=function(t,e){var i=this.handler(t,e);if(0===i.length)return!1;for(var n=0;n<i.length;n++)this.createItem(i[n]);return this.panel.children[0].style.backgroundColor="rgba(255, 255, 255, 0.2)",this.count++,this.container.style.display="block",!0},t.prototype.createItem=function(t){var e=document.createElement("div");e.style.display="inline-block",e.style.boxSizing="border-box",e.style.height="100%",e.style.paddingRight="2em",e.style.paddingLeft="2em",e.innerHTML=t,this.panel.append(e)},t.prototype.initStyle=function(){this.container.style.height="3em",this.container.style.overflow="hidden",this.container.style.display="none",this.scrollContainer.style.width="100%",this.scrollContainer.style.overflowX="scroll",this.scrollContainer.style.overflowY="hidden",this.scrollContainer.style.whiteSpace="nowrap",this.panel.style.display="inline-block",this.panel.style.minWidth="100%",this.panel.style.backgroundColor="rgba(255, 255, 255, 0.2)",this.panel.style.lineHeight="3em"},t.prototype.scroll=function(t){this.scrollContainer.scrollLeft=t},t}();e.default=n}]);